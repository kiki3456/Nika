<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ’– Nika Hidratada</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <!-- Fonte Poppins -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(to bottom right, #ffe4f1, #e0f7ff);
      min-height: 100vh;
      font-size: 20px; /* Fonte maior e visÃ­vel */
    }
    .card {
      background: white;
      border-radius: 1.5rem;
      padding: 2rem;
      box-shadow: 0 10px 20px rgba(0,0,0,0.1);
      max-width: 400px;
      margin: auto;
    }
    .btn {
      background: #ff69b4;
      color: white;
      padding: 0.75rem 1.5rem;
      border-radius: 9999px;
      font-weight: bold;
      transition: transform 0.2s;
      font-size: 18px;
    }
    .btn:hover {
      transform: scale(1.05);
      background: #ff1493;
    }
    .progress-bar {
      background: #ffe4f1;
      border-radius: 9999px;
      overflow: hidden;
      height: 24px;
    }
    .progress-fill {
      background: linear-gradient(to right, #ff69b4, #87cefa);
      height: 100%;
      width: 0%;
      transition: width 0.5s ease;
    }
    .water-drop {
      width: 40px;
      height: 40px;
      fill: #00bfff;
    }
    .hidden { display: none; }
  </style>
</head>
<body class="flex items-center justify-center p-4">
  <div id="app" class="card">
    <!-- Tela de VerificaÃ§Ã£o -->
    <div id="verificationScreen" class="">
      <h1 class="text-2xl mb-4 text-center">ğŸŒ¸ Bem-vinda ao Nika Hidratada ğŸ’§</h1>
      <p class="text-center mb-4 font-bold">Esse app Ã© reservado a garota mais bonita do mundo entÃ£o se vocÃª nÃ£o Ã© ela vaza ğŸšª</p>
      <p class="text-center mb-6">Agora que sÃ³ sobrou vocÃª amorzinho, coloque seu peso ğŸ’•</p>
      <button id="verifyBtn" class="btn w-full">ComeÃ§ar ğŸ’•</button>
    </div>

    <!-- Tela de Perfil -->
    <div id="profileScreen" class="hidden">
      <h2 class="text-xl mb-4 text-center">ğŸ‘© Perfil da Nika â¤ï¸</h2>
      <input type="number" id="weightInput" placeholder="Seu peso (kg)" class="w-full p-3 mb-3 border rounded-lg text-lg">
      <input type="file" id="profileImage" accept="image/*" class="w-full mb-3">
      <img id="profilePreview" class="hidden rounded-full w-24 h-24 object-cover mx-auto mb-4">
      <button id="saveProfileBtn" class="btn w-full">Salvar Perfil ğŸŒŸ</button>
    </div>

    <!-- Tela Principal -->
    <div id="appScreen" class="hidden">
      <div class="text-center mb-6">
        <h2 class="text-xl font-bold">ğŸ’§ Sua meta diÃ¡ria</h2>
        <p id="goalDisplay" class="text-lg">Meta: -- ml</p>
        <p class="mt-2 font-bold text-pink-600">ğŸ‘‘ Nika â¤ï¸</p>
      </div>
      <div class="progress-bar mb-4">
        <div id="progressFill" class="progress-fill"></div>
      </div>
      <div class="flex justify-around mb-6">
        <button id="add200ml" class="btn">+200ml ğŸ¥¤</button>
        <button id="add500ml" class="btn">+500ml ğŸ’¦</button>
      </div>
      <div class="text-center">
        <p id="stats" class="text-lg">VocÃª bebeu: 0ml</p>
      </div>
      <div class="mt-6 flex justify-center">
        <button id="resetDay" class="btn bg-blue-400 hover:bg-blue-600">ğŸ”„ Resetar Dia</button>
      </div>
    </div>
  </div>

  <script>
    // ====================
    // CÃ“DIGO PRINCIPAL
    // ====================
    document.addEventListener('DOMContentLoaded', () => {
      const verificationScreen = document.getElementById('verificationScreen');
      const profileScreen = document.getElementById('profileScreen');
      const appScreen = document.getElementById('appScreen');
      const verifyBtn = document.getElementById('verifyBtn');
      const saveProfileBtn = document.getElementById('saveProfileBtn');
      const weightInput = document.getElementById('weightInput');
      const goalDisplay = document.getElementById('goalDisplay');
      const progressFill = document.getElementById('progressFill');
      const add200ml = document.getElementById('add200ml');
      const add500ml = document.getElementById('add500ml');
      const stats = document.getElementById('stats');
      const profileImage = document.getElementById('profileImage');
      const profilePreview = document.getElementById('profilePreview');
      const resetDayBtn = document.getElementById('resetDay');

      let goal = 2000;
      let consumido = 0;

      verifyBtn.addEventListener('click', () => {
        verificationScreen.classList.add('hidden');
        profileScreen.classList.remove('hidden');
      });

      profileImage.addEventListener('change', (e) => {
        const file = e.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = (ev) => {
            profilePreview.src = ev.target.result;
            profilePreview.classList.remove('hidden');
          };
          reader.readAsDataURL(file);
        }
      });

      saveProfileBtn.addEventListener('click', () => {
        const weight = parseFloat(weightInput.value);
        if (isNaN(weight)) {
          alert("Por favor, preencha seu peso.");
          return;
        }
        goal = Math.round(weight * 35);
        goalDisplay.textContent = `Meta: ${goal}ml`;
        profileScreen.classList.add('hidden');
        appScreen.classList.remove('hidden');
      });

      function atualizarProgresso() {
        const percentage = Math.min((consumido / goal) * 100, 100);
        progressFill.style.width = percentage + "%";
        stats.textContent = `${consumido}ml / ${goal}ml`;
        if (consumido >= goal) {
          confetti();
          mostrarToast("ğŸ‰ ParabÃ©ns! VocÃª bateu sua meta de Ã¡gua!");
        }
      }

      function adicionarAgua(qtd) {
        consumido += qtd;
        atualizarProgresso();
      }

      add200ml.addEventListener('click', () => adicionarAgua(200));
      add500ml.addEventListener('click', () => adicionarAgua(500));
      resetDayBtn.addEventListener('click', () => {
        consumido = 0;
        atualizarProgresso();
      });

      function mostrarToast(message) {
        const toast = document.createElement('div');
        toast.className = 'fixed bottom-4 right-4 bg-pink-600 text-white px-4 py-2 rounded-lg shadow-lg animate-bounce';
        toast.textContent = message;
        document.body.appendChild(toast);
        setTimeout(() => toast.remove(), 3000);
      }

      // ====================
      // ğŸš€ MELHORIAS (mantidas)
      // ====================
      const hoje = new Date().toLocaleDateString("pt-BR");

      function carregarHistorico() {
        let historico = JSON.parse(localStorage.getItem("historicoHidratacao")) || {};
        if (!historico[hoje]) historico[hoje] = 0;
        return historico;
      }

      function salvarHistorico() {
        let historico = carregarHistorico();
        historico[hoje] = consumido;
        localStorage.setItem("historicoHidratacao", JSON.stringify(historico));
      }

      function mostrarResumoSemana() {
        let historico = carregarHistorico();
        let dias = Object.keys(historico).slice(-7);
        let resumo = dias.map(d => `${d}: ${historico[d]}ml`).join("\n");
        let melhorDia = dias.reduce((max, d) => historico[d] > historico[max] ? d : max, dias[0]);
        alert("ğŸ“… Resumo da Semana:\n\n" + resumo + "\n\nğŸ† Melhor dia: " + melhorDia + " (" + historico[melhorDia] + "ml)");
      }

      const resumoBtn = document.createElement("button");
      resumoBtn.textContent = "ğŸ“Š Resumo da Semana";
      resumoBtn.className = "btn w-full mt-4";
      resumoBtn.onclick = mostrarResumoSemana;
      document.querySelector("#appScreen").appendChild(resumoBtn);

      const atualizarProgressoOriginal = atualizarProgresso;
      atualizarProgresso = function() {
        atualizarProgressoOriginal();
        salvarHistorico();
      };

      let ultimoConsumo = Date.now();
      setInterval(() => {
        let agora = Date.now();
        if (agora - ultimoConsumo > 60 * 60 * 1000) {
          mostrarToast("ğŸ’§ JÃ¡ faz um tempinho... hora de beber Ã¡gua, amor!");
        }
      }, 5 * 60 * 1000);

      const adicionarAguaOriginal = adicionarAgua;
      adicionarAgua = function(qtd) {
        adicionarAguaOriginal(qtd);
        ultimoConsumo = Date.now();
      };
    });
  </script>
</body>
</html>
